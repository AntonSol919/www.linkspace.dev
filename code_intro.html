<!DOCTYPE html>
<html>
	<head>
		<title>Linkspace</title>
		 <link rel="icon" type="image/x-icon" href="./images/logo.png">
		 <link rel="stylesheet" href="./style.css"/>
     <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source%20Code%20Pro">
     <script src="/log.js" type="module"></script>
	  <body>
		 <a id="name" href="./index.html">
       <img id="logo" src="./images/logo.svg"/>Linkspace</a>
		<div id="tagline"></div>
    

    <nav>
      <li>
        <a href="./index.html">Home</a>
      </li>
      <li>
        <a href="./code_intro.html">Quick start</a>
      </li>


      <li >
        <a href="./about.html">About</a>
      </li>

      <hr>
      <li>
        <a href="./tutorial/index.html" target="_blank">Tutorials</a>
      </li>
      <li>
        <a href="./guide/index.html" target="_blank">Guide</a>
      </li>

      <li>
        <a href="https://github.com/AntonSol919/linkspace/releases">Download</a>
      </li>
      <li>
        <a href="https://github.com/AntonSol919/linkspace" target="_blank">Git</a>
      </li>

    </nav>
    
    <div id="main">
      <p>This introduction uses the `lk` cli with bash. Follow along by
      <a
      href="https://github.com/AntonSol919/linkspace/releases">downloading</a>
      the latest release.</p>
      <div class="sourceCode" id="version"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="version-1"><a href="#version-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> <span class="at">--version</span></span></code></pre></div>
      <pre class="example"><code>linkspace-cli linkspace-cli - 0.6.0 - main - 612b10f - 1.77.0-nightly
</code></pre>
      <h1 id="point">Point</h1>
      <p>A single unit|event|message in linkspace is called a `point`.
      Each can hold ~64kb.</p>
      <div class="sourceCode" id="point-hello"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="point-hello-1"><a href="#point-hello-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hello, Sol!&quot;</span> <span class="kw">|</span> <span class="ex">lk</span> point <span class="op">&gt;</span> mylog</span></code></pre></div>
      <p>Points have optional properties besides the data field.</p>
      <p>a spacename:</p>
      <div class="sourceCode" id="point-spacename"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="point-spacename-1"><a href="#point-spacename-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-n</span> some data <span class="kw">|</span> <span class="ex">lk</span> point /my/example/spacename <span class="at">--data-stdin</span> <span class="op">&gt;&gt;</span> mylog</span></code></pre></div>
      <p>a timestamp in microseconds since epoch using `now` by
      default:</p>
      <div class="sourceCode" id="point-create"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="point-create-1"><a href="#point-create-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 12minuites and 10 seconds in the past - the [..] syntax is touched on later</span></span>
<span id="point-create-2"><a href="#point-create-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> point /my/example/other_space <span class="at">--stamp</span> <span class="pp">[</span><span class="ss">now:</span><span class="pp">-</span><span class="ss">12m10s</span><span class="pp">]</span> <span class="op">&gt;&gt;</span> mylog </span></code></pre></div>
      <p>and a public key + signature:</p>
      <div class="sourceCode" id="point-signed"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="point-signed-1"><a href="#point-signed-1" aria-hidden="true" tabindex="-1"></a><span class="va">KEY</span><span class="op">=</span><span class="va">$(</span><span class="ex">lk</span> key <span class="at">--no-pubkey</span> <span class="at">--no-lk</span> <span class="at">--password</span> <span class="st">&#39;my secret&#39;</span><span class="va">)</span> </span>
<span id="point-signed-2"><a href="#point-signed-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> point /my/example/spacename/subspace <span class="at">--sign</span> <span class="at">--enckey</span> <span class="st">&quot;</span><span class="va">$KEY</span><span class="st">&quot;</span> <span class="at">--password</span> <span class="st">&#39;my secret&#39;</span> <span class="op">&gt;&gt;</span> mylog</span></code></pre></div>
      <p>All points are hashed using Blake3.</p>
      <p><strong>Point's refer to the hashed fields/data. The point,
      hash, and a header are packed into the packet format.
      Functions/APIs deal exclusively in the packet format.</strong></p>
      <p>`pktf` formats a stream of packets.</p>
      <div class="sourceCode" id="pktf"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="pktf-1"><a href="#pktf-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> mylog <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;&#39;[data]&#39; hashes to: [hash:str]&quot;</span></span></code></pre></div>
      <pre class="example"><code>&#39;Hello, Sol!
&#39; hashes to: Yrs7iz3VznXh-ogv4aM62VmMNxXFiT4P24tIfVz9sTk
&#39;some data&#39; hashes to: BhLJUReezeogaqZUV2mC0pu1iwVAZMlLT3FeTmX0KLQ
&#39;&#39; hashes to: v5m3yqKtUr4F_SkiuPMIwccWCsa6PHoZa9t6yZzVvHA
&#39;&#39; hashes to: xPiohwQ6EVL2_6fOtOnyJM4mfM1JpUp-bm3VRKGG0O8
</code></pre>
      <p>The format string evaluates and substitutes '[..]' expressions.
      eg. output only data: `cat mylog | lk pktf "[data]"`.</p>
      <p>The limited set of fields with their fixed wire format makes
      them fast to process. For example using `lk filter`.</p>
      <p>This command only passes those with a spacename starting with
      `/my/example` and 1 additional space component</p>
      <div class="sourceCode" id="filter"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="filter-1"><a href="#filter-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> mylog <span class="kw">|</span> <span class="ex">lk</span> filter /my/example:<span class="pp">*</span> <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;[hash:str] [space:str]&quot;</span></span></code></pre></div>
      <pre class="example"><code>BhLJUReezeogaqZUV2mC0pu1iwVAZMlLT3FeTmX0KLQ /my/example/spacename
v5m3yqKtUr4F_SkiuPMIwccWCsa6PHoZa9t6yZzVvHA /my/example/other_space
</code></pre>
      <div class="line-block">Advanced tip: Build even more complex
      filters by using `lk do`</div>
      <p>Points are addressable by their hash. To reference one point
      from another add a link. Each link is a 16 byte tag and 32 byte
      hash. If fewer than 16 bytes are used in the tag it is left-padded
      with 0's.</p>
      <div class="sourceCode" id="links"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="links-1"><a href="#links-1" aria-hidden="true" tabindex="-1"></a><span class="va">HASH</span><span class="op">=</span><span class="va">($(</span><span class="fu">cat</span> mylog <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="pp">[</span><span class="ss">hash:str</span><span class="pp">]</span><span class="va">))</span></span>
<span id="links-2"><a href="#links-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> point <span class="st">&quot;/my/example/linkpoing&quot;</span> <span class="at">--</span> <span class="st">&quot;my first link:</span><span class="va">${HASH</span><span class="op">[</span><span class="dv">0</span><span class="op">]</span><span class="va">}</span><span class="st">&quot;</span> <span class="st">&quot;other link:Yrs7iz3VznXh-ogv4aM62VmMNxXFiT4P24tIfVz9sTk&quot;</span> <span class="op">&gt;&gt;</span> mylog</span></code></pre></div>
      <p>Optionally get fancy with `pktf` and `xargs`.</p>
      <div class="sourceCode" id="links-xargs"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="links-xargs-1"><a href="#links-xargs-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> mylog <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;mytag:[hash:str]&quot;</span> <span class="kw">|</span> <span class="fu">xargs</span> lk point /my/example/link <span class="at">--</span> <span class="op">&gt;&gt;</span> mylog</span></code></pre></div>
      <p>A tool like `lk collect` has a few additional options for
      linking points received on stdin. However, the `lk` cli has its
      limits. Consider using a better programming language when doing
      non-trivial stuff.</p>
      <details>
      <summary>
      Click here to see a dot graphiv representation of `mylog`
      </summary>

      <p><img src="images/mylog-dot.svg" /></p>
      </details>

      <p>Creating packets with `lk point` detects what type of packet is
      being created. However, it is better to be explicit. The 3 types
      of points are: `datapoint`, `linkpoint`, or `keypoint` (a signed
      linkpoint).</p>
      <p>For the linkpoint and keypoint command, data is not read from
      stdin by default.</p>
      <div class="sourceCode" id="point-stdin"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="point-stdin-1"><a href="#point-stdin-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> somedata <span class="kw">|</span> <span class="ex">lk</span> linkpoint /my/other_spacename <span class="at">--data-stdin</span> <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;[hash:str] = [data]&quot;</span></span></code></pre></div>
      <pre class="example"><code>nQS3grNm_BM-YHdirso3T8m1qWbOZW1MOyUTASTIg5M = somedata
</code></pre>
      <h1 id="database">Database</h1>
      <p>Up to this point packets were simply dumped to a file.
      Linkspace is primarily its packet format. It can be used with
      plain files or any database. However, library also includes a
      database.</p>
      <div class="sourceCode" id="db-init"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="db-init-1"><a href="#db-init-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LK_DIR</span><span class="op">=</span>/tmp/linkspace <span class="kw">;</span> </span>
<span id="db-init-2"><a href="#db-init-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> init <span class="kw">;</span> </span>
<span id="db-init-3"><a href="#db-init-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> mylog <span class="kw">|</span> <span class="ex">lk</span> write <span class="op">&gt;</span> /dev/null <span class="kw">;</span> </span></code></pre></div>
      <pre class="example"><code>LkInfo { kind: &quot;lmdb&quot;, dir: Some(&quot;/tmp/linkspace&quot;) }
</code></pre>
      <p>Instead of piping into `lk write`, most commands take a write
      destinations such as 'db'.</p>
      <div class="sourceCode" id="write"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="write-1"><a href="#write-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> hello world <span class="kw">|</span> <span class="ex">lk</span> point <span class="at">--write</span> db <span class="at">--write</span> file:mylog <span class="at">--write</span> stdout <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="pp">[</span><span class="ss">data</span><span class="pp">]</span></span></code></pre></div>
      <pre class="example"><code>hello world
</code></pre>
      <p>The database has three indices.</p>
      <ul>
      <li>'log' is indexed on the timestamp a point is written to the
      database.</li>
      <li>'hash' is indexed on the point's hash.</li>
      <li>'tree' is essentially indexed on a point's [space, create
      stamp] (see the guide for full details).</li>
      </ul>
      <p>The database is accessed through the runtime. The runtime is
      notified whenever ANY process or thread saves to the database.
      Using the library this requires registering callbacks that are
      triggered by a user-driven eventloop (<a
      href="./guide/index.html#runtime">guide</a>).</p>
      <p>The `lk` cli is focused on piping packets and handles most of
      the runtime.</p>
      <p>Getting points from the runtime uses functions: `read`,
      `watch`, and `tap`. `read` accesses the current database, `watch`
      reacts when new packet are written, and `tap` combines read and
      watch.</p>
      <div class="sourceCode" id="watchtree"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="watchtree-1"><a href="#watchtree-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> tap-tree /my:<span class="pp">**</span> <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;[space:str]&quot;</span> <span class="op">&gt;</span> ./watching <span class="kw">&amp;</span></span></code></pre></div>
      <pre class="example"><code>[1] 26196
</code></pre>
      <div class="sourceCode" id="react"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="react-1"><a href="#react-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ./watching</span></code></pre></div>
      <pre class="example"><code>/my/example/link
/my/example/linkpoing
/my/example/spacename
/my/example/other_space
/my/example/spacename/subspace
</code></pre>
      <p>The current packets are read from disk and piped to a file.
      When a (new) matching point is written to the database `lk
      tap-tree` is notified and writes it out.</p>
      <div class="sourceCode" id="watch-write"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="watch-write-1"><a href="#watch-write-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint /my/my/my <span class="at">--write</span> db</span></code></pre></div>
      <div class="sourceCode" id="react2"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="react2-1"><a href="#react2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ./watching</span></code></pre></div>
      <pre class="example"><code>/my/example/link
/my/example/linkpoing
/my/example/spacename
/my/example/other_space
/my/example/spacename/subspace
/my/my/my
</code></pre>
      <h1 id="applications">Applications</h1>
      <p>There are two fields not yet shown: domain and group.</p>
      <p>The domain is analogous to a IP port. An application pick a
      domain name (max 16 bytes). For example `imageboard`.</p>
      <div class="line-block">`pktf` is common enough to have the alias
      `lk p`.</div>
      <p>The cli syntax is `domain:group:/space`. If one is left out or
      empty the default is the null domain and the public group.</p>
      <div class="sourceCode" id="domain"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="domain-1"><a href="#domain-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint imageboard::/spacename <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[domain:str]&quot;</span></span></code></pre></div>
      <pre class="example"><code>imageboard
</code></pre>
      <p>Building an application is done by mapping an application state
      to and from linkspace packets.</p>
      <div class="line-block">This type of application design requires a
      different way of thinking.<br />
      <br />
      In classic network systems most common today, a single authority
      holds the database and everyone is dependent on the order they
      define.<br />
      It is the special case for networked applications.<br />
      Most people see the digital space through the assumptions and
      limitations of this special case.<br />
      This has enormous (social) implications.<br />
      <br />
      However, it is straightforward to emulate those classic systems by
      having a single public key sign packets create a total
      order.</div>
      <p>As an example consider a drawing application where multiple
      people paint to a single image without using a server. A mapping
      could look like:</p>
      <ul>
      <li>Image data is saved in data points</li>
      <li>Every link in a linkpoint is: a hash to an image, and a tag
      holding (x,y) coordinates.</li>
      </ul>
      <p>By choice we'll deal with the distributed challenges as follows
      to keep things simple:</p>
      <p>We don't care about missing data, and we'll trust people to set
      an approximately right timestamp. Every time we receive an update
      (even if newer updates were already added) we'll re-paint over our
      current picture by painting everything since that timestamp.</p>
      <p>Adding an image might look something like:</p>
      <div class="sourceCode" id="tuxpng"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="tuxpng-1"><a href="#tuxpng-1" aria-hidden="true" tabindex="-1"></a><span class="va">X</span><span class="op">=</span>30 <span class="kw">;</span> <span class="va">Y</span><span class="op">=</span>200 <span class="kw">;</span> <span class="va">IMG</span><span class="op">=</span><span class="st">&quot;https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg&quot;</span> <span class="kw">;</span> </span>
<span id="tuxpng-2"><a href="#tuxpng-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="va">$IMG</span> <span class="kw">|</span> <span class="ex">lk</span> datapoint <span class="op">&gt;</span> tux.pkt</span>
<span id="tuxpng-3"><a href="#tuxpng-3" aria-hidden="true" tabindex="-1"></a><span class="va">IMG_HASH</span><span class="op">=</span><span class="va">$(</span><span class="fu">cat</span> tux.pkt <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[hash:str]&quot;</span><span class="va">)</span></span>
<span id="tuxpng-4"><a href="#tuxpng-4" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint imageboard:: <span class="at">--</span> <span class="va">$(</span><span class="bu">printf</span> <span class="st">&quot;%08d%08d&quot;</span> <span class="st">&quot;</span><span class="va">$X</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$Y</span><span class="st">&quot;</span><span class="va">)</span>:<span class="va">$IMG_HASH</span> <span class="op">&gt;&gt;</span> tux.pkt</span>
<span id="tuxpng-5"><a href="#tuxpng-5" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> write <span class="at">--pkts</span> ./tux.pkt <span class="co"># Instead of `cat tux.pkt |` reading directly from a pkts file</span></span></code></pre></div>
      <p>Building an image requires the program to tap points in
      `imageboard::` and for each result over a image.</p>
      <div class="sourceCode" id="watch-tree"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="watch-tree-1"><a href="#watch-tree-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> tap-tree <span class="st">&quot;imageboard::&quot;</span> <span class="at">--max</span> 1 <span class="dt">\</span></span>
<span id="watch-tree-2"><a href="#watch-tree-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[hash:str] has the links:\n [links]&quot;</span> </span></code></pre></div>
      <pre class="example"><code>84hbJStKKUVl7CwNDlKNJtzPYLlw3hpEjBHvrJOZLw8 has the links:
 0000003000000200:Sz0ZZDWxKht-jbM7Tfkn0nis4tNoKNPH_kfI7JYUnY4
</code></pre>
      <div class="line-block">Always quote shell arguments.<br />
      Otherwise, the previous example would not have worked.<br />
      Without the quotes the characters `[lin` in "[links]" would be
      interpreted by the default bash shell.</div>
      <p>A link might hold a point's hash that is not (yet) in the
      database. An application has to decide how to handle the
      situation. In this example we'll just wait. Waiting can be done
      manually. e.g.</p>
      <div class="sourceCode" id="watch-tree-links"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="watch-tree-links-1"><a href="#watch-tree-links-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> watch-tree <span class="st">&quot;imageboard::&quot;</span> <span class="at">--max</span> 1 <span class="dt">\</span></span>
<span id="watch-tree-links-2"><a href="#watch-tree-links-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[links]&quot;</span> <span class="dt">\</span></span>
<span id="watch-tree-links-3"><a href="#watch-tree-links-3" aria-hidden="true" tabindex="-1"></a>   <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span><span class="st">&#39;:&#39;</span> <span class="at">-f2</span> <span class="dt">\</span></span>
<span id="watch-tree-links-4"><a href="#watch-tree-links-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">|</span> <span class="fu">xargs</span> <span class="at">-i</span> lk watch-hash <span class="st">&quot;{}&quot;</span> <span class="dt">\</span></span>
<span id="watch-tree-links-5"><a href="#watch-tree-links-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;got point [hash:str] which has [data_size:str] bytes&quot;</span></span></code></pre></div>
      <pre class="example"><code>error: Args { inner: [&quot;/home/rs/Projects/linkspace/target/debug/lk&quot;, &quot;watch-tree&quot;, &quot;imageboard::&quot;, &quot;--max&quot;, &quot;1&quot;] }
&quot;External arg failure linkspace-watch-tree not found - Os { code: 2, kind: NotFound, message: \&quot;No such file or directory\&quot; }&quot;
</code></pre>
      <p>Or use `lk get-links`. It has a few common strategies.</p>
      <div class="sourceCode" id="get-links"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="get-links-1"><a href="#get-links-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> watch-tree <span class="st">&quot;imageboard::&quot;</span> <span class="at">--max</span> 1 <span class="dt">\</span></span>
<span id="get-links-2"><a href="#get-links-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">|</span> <span class="ex">lk</span> get-links pause <span class="dt">\</span></span>
<span id="get-links-3"><a href="#get-links-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;[hash:str]&quot;</span></span></code></pre></div>
      <pre class="example"><code>error: Args { inner: [&quot;/home/rs/Projects/linkspace/target/debug/lk&quot;, &quot;watch-tree&quot;, &quot;imageboard::&quot;, &quot;--max&quot;, &quot;1&quot;] }
&quot;External arg failure linkspace-watch-tree not found - Os { code: 2, kind: NotFound, message: \&quot;No such file or directory\&quot; }&quot;
</code></pre>
      <p>To complete the imageboard application we'll have to add a few
      more steps to merge the data into a single picture. See the
      tutorial for an example on doing this and more.</p>
      <p>The final piece of the puzzle is the group field. A group is 32
      bytes to signal the intended set of recipients. It is orthogonal
      to the domain field. Well designed applications should not care
      what group is addressed.</p>
      <div class="sourceCode" id="group"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="group-1"><a href="#group-1" aria-hidden="true" tabindex="-1"></a><span class="va">PUB</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="st">&quot;Hello, Sol!&quot;</span> <span class="kw">|</span> <span class="ex">lk</span> data <span class="kw">|</span> <span class="ex">lk</span> pktf <span class="st">&quot;[hash:str]&quot;</span><span class="va">)</span></span>
<span id="group-2"><a href="#group-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint :<span class="va">$PUB</span>:/example <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[group:str]&quot;</span></span></code></pre></div>
      <pre class="example"><code>Yrs7iz3VznXh-ogv4aM62VmMNxXFiT4P24tIfVz9sTk
</code></pre>
      <p>If no group is specified (either in an argument or
      $LK<sub>GROUP</sub> environment variable) the public group is
      used.</p>
      <div class="sourceCode" id="group-str"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="group-str-1"><a href="#group-str-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint :<span class="pp">[</span><span class="ss">#:pub</span><span class="pp">]</span>:/example  <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[group:str]&quot;</span> </span></code></pre></div>
      <pre class="example"><code>Yrs7iz3VznXh-ogv4aM62VmMNxXFiT4P24tIfVz9sTk
</code></pre>
      <p>'creating' a group is as simple as picking 32 bytes, deciding
      who the members are, and ensuring they can exchange data.</p>
      <div class="line-block">See <a
      href="./guide/index.html#ABE">ABE</a> for more on the `[..]`
      syntax.<br />
      Its a tiny byte-templating language included in the library for
      convenience.<br />
      ABE is also heavily used for CLI arguments, e.g. `lk linkpoint ::
      –stamp [now]` or `[now:+2h]`</div>
      <p>The other special group is `[0;32]`, also called the private
      group. It's usually referenced with the expression `[#:0]`.
      Functions/subcommands that read/write existing points skip and/or
      warn whenever a point from the private group is seen unless
      enabled with `–private`.</p>
      <div class="sourceCode" id="private"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="private-1"><a href="#private-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> linkpoint domain:<span class="pp">[</span><span class="ss">#:0</span><span class="pp">]</span> <span class="kw">|</span> <span class="ex">lk</span> write <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="co"># creating a packet is ok - but receving is not accepted by `lk write` without --private</span></span></code></pre></div>
      <pre class="example"><code>error: Args { inner: [&quot;/home/rs/Projects/linkspace/target/debug/lk&quot;, &quot;write&quot;] }
Pkt(
    PrivateGroup,
)
</code></pre>
      <p>A network to exchange points in a group can be made from
      scratch. Linkspace does not prescribe a way to do so. Each group /
      network is different, and no single solution can cover every
      situation.</p>
      <p>An example for a network is to use `lk watch
      imageboard:$MYGROUP | …` and forward the entire stream to another
      device using netcat/socat, ssh, email, http, a USB stick, or other
      way to exchange bytes.</p>
      <p>Linkspace is designed to always be a streams of packets. This
      keeps streams compatible with all tools that process streams.</p>
      <p>However, sometimes packets should hold additional context
      information as they're shared around. For that, each packet has a
      mutable header excluded from the hash.</p>
      <p>Filters also work on these fields. With this its possible to
      build for specific network topologies.</p>
      <div class="line-block">See <a
      href="./guide/index.html#mutable">the guide</a> for the mutable
      field names.</div>
      <pre id="exchange"><code>netcat 10.0.0.1 -p 6000 | lk route ubits0:=:0000 | lk write &amp; # get packets from a host and set their ubits0 to 0000
netcat 10.0.2.0 -p 6000 | lk route ubits0:=:0001 | lk write &amp; # get packets from another host and set their ubits0 to 0001
lk linkpoint example::/hello | lk route ubits0:=:0002 | lk write # write my packets with ubits 0002
lk watch-log --asc example::/hello -- &quot;ubits0:&gt;:0000&quot; | nc 10.0.0.1 -p 6000  &amp; # forward all packets with ubits0 higher than 0000 back to host. 
</code></pre>
      <p>A database is shared between multiple applications on a single
      device. This allows some level of interprocess communications.</p>
      <p>Somethings are common enough that the library includes
      functions called 'conventions'. These create or watch for points
      with some predefined spacename, links, and data format.</p>
      <p>One such convention is the `pull` convention. An application
      creating a pull point signals that it wants a set of packets
      retrieved from others if possible.</p>
      <div class="sourceCode" id="pull"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="pull-1"><a href="#pull-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> pull imageboard:: <span class="at">--write</span> stdout <span class="kw">|</span> <span class="ex">lk</span> p <span class="st">&quot;[space:str]\n\n[data]&quot;</span></span></code></pre></div>
      <pre class="example"><code>error: Args { inner: [&quot;/home/rs/Projects/linkspace/target/debug/lk&quot;, &quot;pull&quot;, &quot;imageboard::&quot;, &quot;--write&quot;, &quot;stdout&quot;] }
missing :qid:... option
</code></pre>
      <p>Pull creates a point containing a query. Queries define a 'set
      of points' in linkspace and are used in many places.</p>
      <p>This can be seen in action in an application like <a
      href="./tutorial/imageboard.html">imageboard (bash)</a> or <a
      href="./tutorial/mineweeper-1.html">mineweeper (python)</a> as
      they pull and an exchange process like <a
      href="./tutorial/bash.exchange.html">anyhost.exchange</a>
      server/client ensures that set of packets is retrieved.</p>
      <p>The query is a structure used throught linkspace. The command
      line arguments for `lk filter`, `lk watch`, etc are syntax sugar
      over queries. Add `–print-query` to those commands to see the
      effective query.</p>
      <p>Queries are multiline strings. They're designed such that the
      querystring1 ++ querystring2 results in the common subset of both
      (or an error if the result matches no packets).</p>
      <div class="sourceCode" id="q1"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="q1-1"><a href="#q1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> print-query example::/ok </span></code></pre></div>
      <pre class="example"><code>type:1:\x02
domain:=:\0\0\0\0\0\0\0\0\0example
group:=:b\xbb;\x8b=\xd5\xceu\xe1\xfa\x88\/\xe1\xa3\:\xd9Y\x8c7\x15\xc5\x89&gt;\x0f\xdb\x8bH}\\\xfd\xb19
prefix:=:/ok
depth:=:\x01
</code></pre>
      <div class="sourceCode" id="q2"><pre
      class="sourceCode bash"><code class="sourceCode bash"><span id="q2-1"><a href="#q2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lk</span> print-query example::/ok <span class="at">--</span> <span class="st">&quot;spacename:=:/not_ok&quot;</span></span></code></pre></div>
      <pre class="example"><code>error: Args { inner: [&quot;/home/rs/Projects/linkspace/target/debug/lk&quot;, &quot;print-query&quot;, &quot;example::/ok&quot;, &quot;--&quot;, &quot;spacename:=:/not_ok&quot;] }
Error {
    context: &quot;could not turn stmt into valid extpred&quot;,
    source: ParseKind(
        spacename,
    ),
}
</code></pre>
      <p>That's it for this quick introduction. For a more in-depth
      technical guide or the library API see the <a
      href="./guide/index.html">Guide</a>. The show some of this in
      action.</p>
    </div>
    </body>
</html>
